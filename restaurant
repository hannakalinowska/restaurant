#! /usr/bin/env ruby

Dir['./lib/*'].each do |file|
  require File.expand_path(file, __dir__)
end

cashier = Cashier.new(OrderPrinter.new)
waiter = Waiter.new(Cook.new(AssistantManager.new(cashier)))

LINE_ITEMS = [
  'Pizza',
  'Coffee',
  'Chocolate',
  'Ice cream',
  'Ketchup',
  'Chips',
  'Crisps'
]

(99 + 1).times do
  line_items = (rand(3) + 1).times.map do
    { name: LINE_ITEMS.sample, quantity: rand(10) + 1 }
  end
  waiter.place_order(line_items)
end

cashier.outstanding_orders.each { |number, _order| cashier.pay(number) }
